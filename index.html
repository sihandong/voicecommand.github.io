
<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML//EN">
<html>
<head>
<title>Example of Speech Recognition</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script>


  
$(document).ready(function() {

var finalTranscripts ='';
var potentialcommand = '';

$("#control").click(function() {

  var r = document.getElementById('result');
  var s = document.getElementById('nugget');

  startConverting();

      function startConverting () {
        if('webkitSpeechRecognition' in window){
          var speechRecognizer = new webkitSpeechRecognition();
          speechRecognizer.continuous = true;
          speechRecognizer.interimResults = true;
          speechRecognizer.lang = 'en-US';
          speechRecognizer.start();

          speechRecognizer.onresult = function(event){
            var interimTranscripts = '';
            for(var i = event.resultIndex; i < event.results.length; i++){
              var transcript = event.results[i][0].transcript;
              transcript.replace("\n", "<br>");
              if(event.results[i].isFinal){
                finalTranscripts += transcript;
                potentialcommand = transcript;
              }else{
                interimTranscripts += transcript;
              }
            }
            r.innerHTML = finalTranscripts + '<span style="color:#999">' + interimTranscripts + '</span>';
            
            console.log(potentialcommand);


            var transcriptsArray = potentialcommand.split(" ");
            var scrollornot = jQuery.inArray("scroll", transcriptsArray)
            var foodornot = jQuery.inArray("food", transcriptsArray);
            var upornot = jQuery.inArray("up", transcriptsArray);
            var downornot = jQuery.inArray("down", transcriptsArray);
            var enterornot = jQuery.inArray("enter", transcriptsArray);
            
            console.log(enterornot);
            console.log(transcriptsArray);

            if (scrollornot !== -1 && upornot !== -1){
              $('html,body').animate({
                  scrollTop: $(document).scrollTop()-150
              }, 1000);
              console.log("scrollup");
            } else if (scrollornot !== -1 && downornot !== -1){
              $('html,body').animate({
                  scrollTop: $(document).scrollTop()+150
              }, 1000);
              //console.log("scrolldown");
            } 
            else if (enterornot !== -1){  
               $("#nugget").val(" ");
               var removeEnter = "enter";
               transcriptsArray.splice($.inArray(removeEnter, transcriptsArray),1);
               var enterText = transcriptsArray.toString();
               enterText = enterText.replace(",", " ");
               $("#nugget").val(transcriptsArray);
            } 
            //else if (foodornot !== -1){
            //   $("#nugget").val(potentialcommand);
            //   console.log("fud");
            // } else if (potentialcommand =="scroll up"){

            // }
            else {
              //alert("not a valid command");
            };
          };
          speechRecognizer.onerror = function (event) {
          };
        }else{
          r.innerHTML = 'Your browser is not supported. If google chrome, please upgrade!';
        }
      }


  })




 //$("#commandbutton").click(function() {
 	// var potentialcommand = $("#command").val();

 	// console.log(potentialcommand);
  // var commandarray = $.makeArray(potentialcommand);
  // var commandarray = [];
  // commandarray = potentialcommand.split(" ");
  //console.log(commandarray);
 
/*
    var re = /^(click|scroll|enter)\s(.*)/i;
    var result = re.exec(potentialcommand);

      if(result) {
        var verb = result[1];
      var arg = result[2]

      console.log("verb: " + verb + ", args: " + arg)

      switch(verb) {
            case "click":
              // what do we do if click?
              console.log("handling click")

              //console.log($("*:contains('" + arg + "')"));

              var stringpieces = arg.split(/\s/);

              $("a,input,button").each(function() {
                if($(this)[0].tagName == "INPUT") {
                  // look for the text in INPUT fields
                } else if() {

                }
              })

              break;
            case "scroll":
              // what do we do on scroll?
              console.log("handling scroll`")
              break;
            case "enter":
              // what do we do on enter?
              console.log("handling enter")
              break;
            default:
              console.log("sorry, that is not a recognized command")
      }


        //console.log("Scroll " + result[1]);
        //if(result[1]=="up") {
            // scroll up
        //} else if(result[1]=="down") {
            // scroll down
        //}
      }
*/
 })
//});
</script>

</head>
<body>
<p>
<input type="button" value="click to use voice command" id="control" ><br>
<div id = "result"></div>

<span>what would you like to enter?</span><input type="text" id="nugget"><br>


</p>

<p>
<input type="button" value="cat - click for meow" id = "catbutton"><br>
<a href="google.com">Google</a><br>
<a href="cmu.edu">CMU</a><br>


<span id = "text">
Entire any had depend and figure winter. Change stairs and men likely wisdom new happen piqued six. Now taken him timed sex world get. Enjoyed married an feeling delight pursuit as offered. As admire roused length likely played pretty to no. Means had joy miles her merry solid order. 

Next his only boy meet the fat rose when. Do repair at we misery wanted remove remain income. Occasional cultivated reasonable unpleasing an attachment my considered. Having ask and coming object seemed put did admire figure. Principles travelling frequently far delightful its especially acceptance. Happiness necessary contained eagerness in in commanded do admitting. Favourable continuing difficulty had her solicitude far. Nor doubt off widow all death aware offer. We will up able in both do sing. 

Started his hearted any civilly. So me by marianne admitted speaking. Men bred fine call ask. Cease one miles truth day above seven. Suspicion sportsmen provision suffering mrs saw engrossed something. Snug soon he on plan in be dine some. 

Spot of come to ever hand as lady meet on. Delicate contempt received two yet advanced. Gentleman as belonging he commanded believing dejection in by. On no am winding chicken so behaved. Its preserved sex enjoyment new way behaviour. Him yet devonshire celebrated especially. Unfeeling one provision are smallness resembled repulsive. 

Guest it he tears aware as. Make my no cold of need. He been past in by my hard. Warmly thrown oh he common future. Otherwise concealed favourite frankness on be at dashwoods defective at. Sympathize interested simplicity at do projecting increasing terminated. As edward settle limits at in. 

She literature discovered increasing how diminution understood. Though and highly the enough county for man. Of it up he still court alone widow seems. Suspected he remainder rapturous my sweetness. All vanity regard sudden nor simple can. World mrs and vexed china since after often. 

By in no ecstatic wondered disposal my speaking. Direct wholly valley or uneasy it at really. Sir wish like said dull and need make. Sportsman one bed departure rapturous situation disposing his. Off say yet ample ten ought hence. Depending in newspaper an september do existence strangers. Total great saw water had mirth happy new. Projecting pianoforte no of partiality is on. Nay besides joy society him totally six. 

Expenses as material breeding insisted building to in. Continual so distrusts pronounce by unwilling listening. Thing do taste on we manor. Him had wound use found hoped. Of distrusts immediate enjoyment curiosity do. Marianne numerous saw thoughts the humoured. 

 
</span>

</body>
<style>
  #text {
    left: 20em;
    top: 20em;
    font-size: 2em;
  }

  .command {
    position: fixed;
  }
  .simulation {
    position: fixed;
  }
  .control{
    font-size: 6em;
  }
  #result{
    height : 100px;
    border : 1px solid #ccc;
  }
  
</style>
</html>